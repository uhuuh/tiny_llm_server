目标
- 接受请求，处理请求，返回请求
- 处理尽可能多请求
- 从接收到返回请求的时间尽可能短

设计
- 请求是模型推理的输入，包含prompt文本和推理采样参数
- 处理请求，prompt经过模型自回归推理后生成响应
- 处理尽可能多请求，机器资源有限
- 处理请求，需要显存资源和内存资源, 模型显存占用，参数、激活值，kv cache
- kv cache, 输入token_id转化为qkv向量，缓存已经计算好的kv结果。如果不缓存实际上占用显存一样，而且更费时间

- 模型加载权重
- 处理单个请求，模型推理，采样

5w1h 何时何地，谁，如何做，做什么，为什么做

需求
- 推理服务部署后，客户通过http请求方式传入文本和获取模型输出。客户可以更方便的使用模型
- 非功能性：系统可以处理大量请求，处理请求快，可以处理各种请求

- paged attention 

需求分解为功能点​

server
- add_request
- get_response

scheduler
- add_request
- step

model



